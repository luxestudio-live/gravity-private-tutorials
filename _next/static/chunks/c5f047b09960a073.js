(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,11741,e=>{"use strict";let t=(0,e.i(10965).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],11741)},54210,29439,e=>{"use strict";var t=e.i(10965);let a=(0,t.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>a],54210);let r=(0,t.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],29439)},59606,e=>{"use strict";var t=e.i(68519),a=e.i(29511),r=e.i(58138),i=e.i(76009),l=e.i(91432);e.i(19678);var s=e.i(46805),d=e.i(11741),o=e.i(54210),m=e.i(29439);let c=t.default.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,n=e=>e.map(e=>({...e,src:"/placeholder.svg?height=400&width=400"})),u=[{id:"default_1",src:"/da2.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_2",src:"/da3.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_3",src:"/da4.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_4",src:"/da7.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_5",src:"/da8.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_6",src:"/da9.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_7",src:"/daa1.png",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_8",src:"/daa2.png",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_9",src:"/daa3.png",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_10",src:"/daa4.png",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_11",src:"/daa5.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_12",src:"/daa6.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_13",src:"/da1.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_14",src:"/da5.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0},{id:"default_15",src:"/da6.jpeg",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials",isDefault:!0}];function g(){let{user:e}=(0,l.useAuth)(),[t,g]=(0,r.useState)(n(u)),[p,x]=(0,r.useState)(!0),[f,y]=(0,r.useState)(!1),[v,h]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[N,G]=(0,r.useState)({src:"",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials"});(0,r.useEffect)(()=>{T()},[]),(0,r.useEffect)(()=>{f&&window.scrollTo({top:0,behavior:"smooth"})},[f]);let T=async()=>{try{x(!0);let e=(await (0,s.getDocs)((0,s.collection)(i.db,"gallery"))).docs.map(e=>({id:e.id,...e.data()}));console.log("Fetched new gallery images from Firestore:",e),g(n([...e,...u]))}catch(e){console.error("Error fetching gallery images:",e),g(n(u))}finally{x(!1)}},w=async e=>{let t=e.target.files?.[0];if(t)try{j(!0);let e=new FormData;e.append("file",t),e.append("upload_preset","gallery_uploads");let a=await fetch(`https://api.cloudinary.com/v1_1/${c}/image/upload`,{method:"POST",body:e});if(!a.ok){let e=await a.json();throw Error(`Upload failed: ${e.error?.message||"Unknown error"}`)}let r=await a.json();console.log("Cloudinary upload response:",r),console.log("Image URL:",r.secure_url),G({...N,src:r.secure_url}),alert("Image uploaded successfully!")}catch(e){console.error("Error uploading image:",e),alert("Image upload failed: "+e.message)}finally{j(!1)}},P=async t=>{if(t.preventDefault(),!e)return void alert("You must be logged in");if(!N.src.trim())return void alert("Image URL is required");if(!N.title.trim())return void alert("Title is required");try{if(j(!0),console.log("Saving gallery image:",N),v&&!v.startsWith("default_"))await (0,s.updateDoc)((0,s.doc)(i.db,"gallery",v),N),alert("Gallery image updated!"),h(null);else if(v)alert("Cannot edit default gallery images");else{let e=await (0,s.addDoc)((0,s.collection)(i.db,"gallery"),N);console.log("Gallery image added with ID:",e.id),alert("Gallery image added!")}G({src:"",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials"}),y(!1),await T()}catch(e){console.error("Error saving gallery image:",e),alert("Error: "+e.message)}finally{j(!1)}},D=async e=>{if(e.startsWith("default_"))return void alert("Cannot delete default gallery images");if(confirm("Are you sure you want to delete this gallery image?"))try{j(!0),console.log("Deleting gallery image with ID:",e),await (0,s.deleteDoc)((0,s.doc)(i.db,"gallery",e)),console.log("Gallery image deleted successfully"),alert("Gallery image deleted!"),await T()}catch(e){console.error("Error deleting gallery image:",e),alert("Error deleting gallery image: "+e.message)}finally{j(!1)}},M=t.filter(e=>e.isDefault).length,_=t.filter(e=>!e.isDefault).length;return(0,a.jsxs)("div",{className:"py-4 md:py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6 flex-wrap gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-bold",children:"Gallery Management"}),(0,a.jsxs)("button",{onClick:()=>{f&&(h(null),G({src:"",title:"Gravity Private Tutorials",description:"Moments from Gravity Private Tutorials"})),y(!f)},className:"inline-flex items-center gap-2 px-4 md:px-6 py-2 md:py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors font-medium text-sm md:text-base",children:[(0,a.jsx)(m.Plus,{className:"w-4 md:w-5 h-4 md:h-5 flex-shrink-0"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:f?"Cancel":"Add Gallery Image"}),(0,a.jsx)("span",{className:"sm:hidden",children:f?"Cancel":"Add"})]})]}),f&&(0,a.jsxs)("div",{className:"bg-card border border-border rounded-xl p-4 md:p-8 mb-6 md:mb-8",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6",children:v?"Edit Gallery Image":"Add New Gallery Image"}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-4 md:space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs md:text-sm font-medium mb-2",children:"Gallery Image"}),(0,a.jsxs)("div",{className:"flex gap-2 md:gap-3 flex-col",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:w,disabled:b,className:"block text-xs md:text-sm"}),N.src&&(0,a.jsx)("img",{src:N.src,alt:"preview",className:"w-24 md:w-32 h-24 md:h-32 rounded object-cover"})]}),N.src&&(0,a.jsxs)("p",{className:"text-xs md:text-sm text-muted-foreground mt-2",children:["Image uploaded: ",N.src.slice(0,50),"..."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs md:text-sm font-medium mb-2",children:"Title"}),(0,a.jsx)("input",{type:"text",value:N.title,onChange:e=>G({...N,title:e.target.value}),placeholder:"Image title",required:!0,style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",boxSizing:"border-box"},className:"md:text-base"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs md:text-sm font-medium mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:N.description,onChange:e=>G({...N,description:e.target.value}),placeholder:"Image description",rows:3,style:{width:"100%",padding:"0.5rem 0.75rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",fontSize:"0.875rem",boxSizing:"border-box",fontFamily:"inherit"},className:"md:text-base"})]}),(0,a.jsx)("button",{type:"submit",disabled:b,style:{width:"100%",padding:"0.75rem",background:"#3b82f6",color:"#fff",borderRadius:"0.375rem",fontWeight:"500",border:"none",cursor:b?"not-allowed":"pointer",opacity:b?.7:1},children:b?"Uploading...":v?"Update Image":"Add Image"})]})]}),(0,a.jsxs)("div",{className:"space-y-6 md:space-y-8",children:[_>0&&(0,a.jsxs)("div",{className:"bg-card border border-border rounded-xl p-4 md:p-8",children:[(0,a.jsxs)("h2",{className:"text-xl md:text-2xl font-bold mb-2 md:mb-4",children:["New Gallery Images (",_,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6",children:t.filter(e=>!e.isDefault).map(e=>(0,a.jsxs)("div",{className:"border border-border rounded-lg overflow-hidden bg-muted/30 relative flex flex-col",children:[(0,a.jsx)("img",{src:e.src,alt:e.title,className:"w-full h-32 md:h-48 object-cover"}),(0,a.jsxs)("div",{className:"p-2 md:p-4 flex-1 flex flex-col",children:[(0,a.jsx)("h3",{className:"font-bold text-sm md:text-lg mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground flex-1 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex gap-1 md:gap-2 mt-2 md:mt-4 pt-2 md:pt-4 border-t border-border",children:[(0,a.jsxs)("button",{onClick:()=>{e.isDefault?alert("Default gallery images cannot be edited. Only new images can be edited."):(G({src:e.src,title:e.title,description:e.description}),h(e.id),y(!0))},disabled:b,className:"flex-1 flex items-center justify-center gap-1 md:gap-2 px-2 md:px-3 py-1.5 md:py-2 bg-primary/10 text-primary hover:bg-primary/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs md:text-sm",children:[(0,a.jsx)(o.Edit2,{className:"w-3 md:w-4 h-3 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Edit"})]}),(0,a.jsxs)("button",{onClick:()=>e.id&&D(e.id),disabled:b,className:"flex-1 flex items-center justify-center gap-1 md:gap-2 px-2 md:px-3 py-1.5 md:py-2 bg-destructive/10 text-destructive hover:bg-destructive/20 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-xs md:text-sm",children:[(0,a.jsx)(d.Trash2,{className:"w-3 md:w-4 h-3 md:h-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:b?"Deleting...":"Delete"})]})]})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-xl p-4 md:p-8",children:[(0,a.jsxs)("h2",{className:"text-xl md:text-2xl font-bold mb-2 md:mb-4",children:["Default Gallery Images (",M,")"]}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground mb-4 md:mb-6",children:"Existing gallery images - cannot be edited or deleted"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6",children:t.filter(e=>e.isDefault).map(e=>(0,a.jsxs)("div",{className:"border border-border rounded-lg overflow-hidden bg-muted/30",children:[(0,a.jsx)("img",{src:e.src,alt:e.title,className:"w-full h-32 md:h-48 object-cover"}),(0,a.jsxs)("div",{className:"p-2 md:p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-sm md:text-lg mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description})]})]},e.id))})]})]})]})}e.s(["default",()=>g])}]);